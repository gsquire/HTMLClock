<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Clock</title>
        <link rel="stylesheet" type="text/css" href="css/clock.css">
        <link rel="stylesheet" type="text/css" href="css/alarm.css">

        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
    </head>
    <body>
        <script>
            window.fbAsyncInit = function() {
                FB.init({
                    appId: '1572714179640805',
                    xfbml: true,
                    version: 'v2.2'
                });

                function statusChangeCallback(response) {
                    if (response.status === 'connected') {
                        // TODO
                    }
                    else if (response.status = 'not_authorized') {
                        $("#fbLogin").html("Please log in to FB");
                    }
                    else {
                        $("#fbLogin").html("Please log in to FB");
                    }
                }

                function checkLoginState() {
                    FB.getLoginStatus(function (response) {
                        statusChangeCallback(response);
                    } );
                }
            };

            (function(d, s, id){
                var js, fjs = d.getElementsByTagName(s)[0];
                if (d.getElementById(id)) {return;}
                js = d.createElement(s); js.id = id;
                js.src = "//connect.facebook.net/en_US/sdk.js";
                fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));

            function testAPI() {
                FB.api("/me", function(response) {
                    $("#fbLogin").html("Hi there, " + response.name);
                } );
            }
        </script>

        <h1 class="header">Garrett's Clock</h1>
        <h3>
            <div id="g_clock"></div>
        </h3>

        <div class="fb-login-button" data-max-rows="1" data-size="large" data-show-faces="false" data-auto-logout-link="true"></div>

        <fb:login-button scope="email" onlogin="checkLoginState();">
        </fb:login-button>

        <div id="fbLogin">
        </div>

        <div id="forecastLabel"></div>

        <img id="forecastIcon" alt="Forecast Icon"></img>

        <p>Click on an alarm to delete it.</p>

        <div id="alarmContainer">
            <div id="alarmHeader" class="flexable">
                <h2>Alarms</h2>
                <input type="button" value="Add Alarm" class="button" id="addAlarmButton"/>
            </div>
            <div id="alarms"></div>
        </div>

        <div id="mask" class="hide">
            <div id="popup" class="hide">
                <h1>Add Alarm</h1>
                <div id="timeContainer">
                    <select id="hours">
                    </select>
                    <select id="mins">
                    </select>
                    <select id="ampm">
                        <option>am</option>
                        <option>pm</option>
                    </select>
                </div>
                <input type="text" id="alarmName" placeholder="Alarm Name"/>
                <div class="flexable">
                    <input type="button" value="Cancel" class="button" id="cancelAlarmButton"/>
                    <input type="button" value="Save Alarm" class="button" id="saveAlarmButton"/>
                </div>
            </div>
        </div>

        <script src="//www.parsecdn.com/js/parse-1.3.4.min.js"></script>
        <script type="text/javascript" src="js/clock.js"></script>
    </body>
</html>
