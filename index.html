<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Clock</title>
        <link rel="stylesheet" type="text/css" href="css/clock.css">
        <link rel="stylesheet" type="text/css" href="css/alarm.css">

        <meta name="google-signin-clientid" content="302057691424-bq6vvd8vari4sjcg126foe00lhgdrdkp.apps. googleusercontent.com" />
        <meta name="google-signin-scope" content="https://www.googleapis.com/auth/plus.login" />
        <meta name="google-signin-requestvisibleactions" content="http://schema.org/AddAction" />
        <meta name="google-signin-cookiepolicy" content="single_host_origin" />

        <script src="https://apis.google.com/js/client:platform.js?onload=render" async defer>
            function signinCallback(authResult) {
                if (authResult['status']['signed_in']) {
                    // Update the app to reflect a signed in user
                    // Hide the sign-in button now that the user is authorized, for example:
                    document.getElementById('signinButton').setAttribute('style', 'display: none');
                    } else {
                    // Update the app to reflect a signed out user
                    // Possible error values:
                    //   "user_signed_out" - User is signed-out
                    //   "access_denied" - User denied access to your app
                    //   "immediate_failed" - Could not automatically log in the user
                    console.log('Sign-in state: ' + authResult['error']);
                }
            }
            /* Executed when the APIs finish loading */
            function render() {

                // Additional params including the callback, the rest of the params will
                // come from the page-level configuration.
                var additionalParams = {
                    'callback': signinCallback
                };

                // Attach a click listener to a button to trigger the flow.
                var signinButton = document.getElementById('signinButton');
                signinButton.addEventListener('click', function() {
                    gapi.auth.signIn(additionalParams); // Will use page level configuration
                } );
            }
        </script>
    </head>
    <body>
        <h1 class="header">Garrett's Clock</h1>
        <h3>
            <div id="g_clock"></div>
        </h3>

        <div id="forecastLabel"></div>

        <img id="forecastIcon" alt="Forecast Icon"></img>

        <p>Click on an alarm to delete it.</p>

        <div id="alarmContainer">
            <div id="alarmHeader" class="flexable">
                <h2>Alarms</h2>
                <input type="button" value="Add Alarm" class="button" id="addAlarmButton"/>
            </div>
            <div id="alarms"></div>
        </div>

        <div id="mask" class="hide">
            <div id="popup" class="hide">
                <h1>Add Alarm</h1>
                <div id="timeContainer">
                    <select id="hours">
                    </select>
                    <select id="mins">
                    </select>
                    <select id="ampm">
                        <option>am</option>
                        <option>pm</option>
                    </select>
                </div>
                <input type="text" id="alarmName" placeholder="Alarm Name"/>
                <div class="flexable">
                    <input type="button" value="Cancel" class="button" id="cancelAlarmButton"/>
                    <input type="button" value="Save Alarm" class="button" id="saveAlarmButton"/>
                </div>
            </div>
        </div>

        <button id="signinButton">Sign in with Google</button>

        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
        <script src="//www.parsecdn.com/js/parse-1.3.4.min.js"></script>
        <script type="text/javascript" src="js/clock.js"></script>
    </body>
</html>
